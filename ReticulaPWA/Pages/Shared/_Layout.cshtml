<!DOCTYPE html>
<html lang="en" translate="no">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="~/css/estilos.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">
    <link rel="shortcut icon"
          href="~/assets/logos/Logo144x144.png"
          type="image/x-icon" />

    <link rel="manifest" href="~/manifest.json" />

    <title>Avance Reticular</title>
    <style>
        body {
            font-family: "Montserrat", system-ui,sans-serif;
        }

    </style>
</head>
<body>
    <div class="container">

        <!-- #region HEADER -->

        <header class="header">
            <div class="header__div">
                <figure class="header__logo">
                    <img src="assets/logos/Logo192x192.png"
                         alt="Logo"
                         class="header__logo-img" />
                </figure>
                <h1 class="header__title">Avance Reticular</h1>
            </div>

            <figure class="header__figure">
                <img src="assets/iconos/opciones.svg"
                     alt="Opciones"
                     class="header__img__opciones" />
            </figure>

            <div class="menu-flotante">
                <div class="menu-flotante__info menu-flotante__item">
                    <img src="assets/iconos/card-info.png"
                         alt="info"
                         class="menu-flotante__img" />
                    <div class="menu-flotante__info-div">
                        <label class="menu-flotante__nombre noselect"></label>
                        <label class="menu-flotante__numcontrol noselect"></label>
                    </div>
                </div>

                <div class="menu-flotante__pdf menu-flotante__item">
                    <img src="assets/iconos/download.svg"
                         alt="download"
                         class="menu-flotante__img" />
                    <label class="menu-flotante__pdf-label noselect">Descargar Retícula</label>
                </div>
                <div class="menu-flotante__logout menu-flotante__item">
                    <img src="assets/iconos/logout.svg"
                         alt="logout"
                         class="menu-flotante__img" />
                    <label class="menu-flotante__pdf-label noselect">Cerrar Sesión</label>
                </div>
            </div>
        </header>

        <!-- #endregion HEADER -->
        <!-- #region MENU -->

        <aside class="menu">
            <nav class="nav">
                <ul class="nav__list">
                    <li class="nav__item" id="link-reticula">
                        <img src="~/assets/iconos/reticula.svg" alt="Reticula" class="nav__img" />
                        <a class="nav__link">Materias</a>
                    </li>
                    <li class="nav__item" id="link-perfil">
                        <img src="~/assets/iconos/user.svg" alt="Perfil" class="nav__img" />
                        <a class="nav__link">Perfil</a>
                    </li>
                    <li class="nav__item" id="link-horario">
                        <img src="~/assets/iconos/horario.png" alt="Horario" class="nav__img" />
                        <a class="nav__link">Horario</a>
                    </li>
                </ul>
            </nav>

            <section class="modal">
                <div class="modal__cerrar-sesion">
                    <p class="cerrar-sesion__titulo">
                        ¿Está seguro de que desea cerrar sesión?
                    </p>
                    <p class="cerrar-sesion__descripcion">
                        Deberá volver a introducir sus credenciales si quiere volver a
                        acceder al sistema.
                    </p>
                    <div class="cerrar__sesionn__botones">
                        <button class="cerrar-sesion__btn" id="btnAceptar">
                            Aceptar
                        </button>
                        <button class="cerrar-sesion__btn" id="btnCancelar">
                            Cancelar
                        </button>
                    </div>
                </div>
            </section>
        </aside>

        <!-- #endregion MENU-->
        <!-- #region CONTENIDO -->

        <main class="main">
            @RenderBody()
        </main>

        <!-- #endregion CONTENIDO-->

    </div>
    <script src="~/scripts/html2Pdf.js"></script>

    <script>

        const registerServiceWorker = async () => {
            if ("serviceWorker" in navigator) {
                try {
                    await navigator.serviceWorker.register("/serviceworker.js?v=6");
                } catch (error) {
                    console.error(`Falló el registro con el ${error}`);
                }
            }
        };

        registerServiceWorker();

        window.addEventListener("DOMContentLoaded", () => {

            const perfil = JSON.parse(localStorage.getItem("perfil"));
            const credenciales = JSON.parse(localStorage.getItem("credenciales"));

            if (perfil && credenciales) {

                document.querySelector(".menu-flotante__nombre").textContent = perfil.nombreDelAlumno;
                document.querySelector(".menu-flotante__numcontrol").textContent = credenciales.numeroControl;
            }

        });

    </script>
    <script src="~/scripts/main.js?v=2"></script>

</body>
</html>
